# yaml-language-server: $schema=/home/thomas/src/ifstate/schema/ifstate.conf.schema.json

options:
  sysctl:
    all:
      ipv4:
        forwarding: 1
    default:
      ipv4:
        forwarding: 1
    mpls:
      ip_ttl_propagate: 1

defaults:
  - match:
      - ifname: ^enp
        kind: ^physical|vlan$
    clear_addresses: true
    clear_neighbours: true
    link:
      state: down
      mtu: 1500

interfaces:
- name: eno1
  addresses:
  - 10.2.0.254/24
  link:
    state: up
    kind: physical
    businfo: 0000:00:1f.6
# - name: enp5s0
#   link:
#     state: up
#     kind: physical
#     permaddr: '54:b2:03:16:94:09'
- name: enp5s0
  addresses: []
  link:
    state: up
    kind: physical
    permaddr: '54:b2:03:16:94:09'
  ethtool:
    pause:
      rx: off
      tx: off
      autoneg: true

routing:
  routes:
  - to: 0.0.0.0/0
    dev: eno1
    via: 10.2.0.1
  rules: []

namespaces:
  service:
    options:
      sysctl:
        all:
          ipv4:
            forwarding: 1
        default:
          ipv4:
            forwarding: 1
        mpls:
          ip_ttl_propagate: 0
    interfaces: []
  tenant1:
    interfaces:
      - name: enp5s0.48
        addresses:
          - 192.0.2.1/24
        link:
          kind: vlan
          vlan_id: 48
          link: enp5s0
          link_netns: null
  tenant2:
    interfaces:
      - name: enp5s0.42
        addresses:
          - 192.0.2.1/24
        sysctl:
          mpls:
            input: 0
        link:
          kind: vlan
          vlan_id: 42
          link: enp5s0
          link_netns: null
          state: up
